<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MQTT Client</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.min.js" type="text/javascript"></script>
</head>
<body>
    <h1>MQTT Client</h1>
    <button onclick="connect()">Connect</button>
    <button onclick="subscribe()">Subscribe</button>
    <button onclick="publish()">Publish</button>
    <div id="status"></div>

    <script>
        var client;

        function connect() {
            console.log("Attempting to connect...");
            client = new Paho.MQTT.Client("localhost", 9001, "clientId-1");
            client.onConnectionLost = onConnectionLost;
            client.onMessageArrived = onMessageArrived;
            client.connect({
                onSuccess: onConnect,
                onFailure: onFailure,
                userName: "nct",
                password: "nct0810",
                useSSL: false
            });
        }

        function onConnect() {
            document.getElementById('status').innerText = "Connected";
            console.log("Connected");
        }

        function onFailure(error) {
            document.getElementById('status').innerText = "Connection failed: " + error.errorMessage;
            console.log("Connection failed: " + error.errorMessage);
        }

        function onConnectionLost(responseObject) {
            if (responseObject.errorCode !== 0) {
                document.getElementById('status').innerText = "Connection Lost: " + responseObject.errorMessage;
                console.log("Connection Lost: " + responseObject.errorMessage);
            }
        }

        function onMessageArrived(message) {
            console.log("Message arrived: " + message.payloadString);
        }

        function subscribe() {
            if (client.isConnected()) {
                client.subscribe("your/topic");
                console.log("Subscribed to topic");
            } else {
                console.log("Client not connected. Unable to subscribe.");
            }
        }

        function publish() {
            if (client.isConnected()) {
                var message = new Paho.MQTT.Message("Hello MQTT");
                message.destinationName = "your/topic";
                client.send(message);
                console.log("Message published");
            } else {
                console.log("Client not connected. Unable to publish.");
            }
        }
    </script>
</body>
</html>
